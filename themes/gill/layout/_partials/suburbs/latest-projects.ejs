<!-- prettier-ignore -->
<section class="py-8 lg:py-24 bg-white">
	<div class="px-4 mx-auto max-w-screen-xl">
		<div class="mx-auto max-w-screen-md text-center mb-8 lg:mb-16">
			<h2 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-900">
				Latest <%= category.charAt(0).toUpperCase() + category.slice(1) %> Photo Shoots
			</h2>
			<p class="font-light text-gray-500 sm:text-xl">
				Explore my recent <%= category %> work and successful projects.
			</p>
		</div>

		<div class="swiper latest-projects">
			<div class="swiper-wrapper">
				<% 
				// Filter posts by category and layout
				var filteredPosts = site.posts.filter(function(post) {
					var isWorkPost = post.layout === 'work';
					var hasCategory = post.categories && post.categories.some(function(cat) {
						return cat.name.toLowerCase() === category.toLowerCase();
					});
					return isWorkPost && hasCategory;
				}).slice(0, 6);
				%>
				
				<% filteredPosts.forEach(function(project, index) { %>
				<div class="swiper-slide">
					<%- include('../category/category-card.ejs', { post: project }) %>
				</div>
				<% }); %>
			</div>
		</div>
	</div>

	<script>
		var latestProjectsSwiper = new Swiper(".latest-projects", {
			slidesPerView: 2,
			spaceBetween: 30,
			loop: true,
			speed: 1500,
			autoplay: {
				delay: 1000,
				pauseOnMouseEnter: true,
			},
			breakpoints: {
				320: {
					slidesPerView: 1,
				},
				768: {
					slidesPerView: 2,
				},
				1024: {
					slidesPerView: 2,
				},
				1280: {
					slidesPerView: 2,
				},
			},
		});
	</script>
</section>
