<main class="pb-16 lg:pb-24 bg-white antialiased">
	<section class="bg-white">
		<div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6">
			<div class="mx-auto max-w-screen-sm text-center mb-8 lg:mb-16">
				<h2 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-900">
					Our Blog
				</h2>
				<p class="font-light text-gray-500 sm:text-xl">
					Sharing photography tips, behind-the-scenes stories, and beautiful
					moments from our sessions.
				</p>
			</div>

			<!-- prettier-ignore -->
			<% 
			// Use page.posts if available, otherwise site.posts 
			var allPosts = page.posts || site.posts;
			// Filter to only show blog posts (posts with layout: post)
			var posts = allPosts.filter(function(post) {
				return post.layout === 'post';
			});
			%>
			<div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
				<% posts.each(function(post){ %>
				<article
					class="p-4 bg-white rounded-lg border border-gray-200 shadow-md"
				>
					<a href="<%= url_for(post.path) %>">
						<img
							class="mb-5 rounded-lg w-full h-48 object-cover"
							src="<%= post.featured || post.hero || post.thumbnail || post.image || '/img/family.jpg' %>"
							alt="<%= post.title %>"
						/>
					</a>
					<% if (post.categories && post.categories.length > 0 &&
					post.categories[0]) { %>
					<span
						class="bg-purple-100 text-purple-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"
					>
						<%= post.categories[0].name %>
					</span>
					<% } %>

					<h2 class="my-2 text-2xl font-bold tracking-tight text-gray-900">
						<a href="<%= url_for(post.path) %>" class="hover:text-gray-700">
							<%= post.title %>
						</a>
					</h2>

					<p class="mb-4 font-light text-gray-500">
						<%= post.excerpt || post.description || post.content.substring(0,
						150) + '...' %>
					</p>

					<div class="flex items-center space-x-4">
						<div
							class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center"
						>
							<svg
								class="w-6 h-6 text-gray-500"
								fill="currentColor"
								viewBox="0 0 20 20"
							>
								<path
									fill-rule="evenodd"
									d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
									clip-rule="evenodd"
								></path>
							</svg>
						</div>
						<div class="font-medium">
							<div class="text-gray-900">Gill Photography</div>
							<div class="text-sm font-normal text-gray-500">
								<%= post.date.format('MMM DD, YYYY') %> <% if
								(post.reading_time) { %> Â· <%= post.reading_time %> min read <%
								} %>
							</div>
						</div>
					</div>
				</article>
				<% }); %>
			</div>

			<% if (posts.length === 0) { %>
			<div class="text-center py-12">
				<p class="text-gray-500 text-lg">
					No blog posts found yet. Check back soon!
				</p>
			</div>
			<% } %>
		</div>
	</section>
</main>
